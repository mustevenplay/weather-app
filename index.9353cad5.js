async function e(e,t){const r="coordinates"==e?`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t[0]}&lon=${t[1]}&zoom=10`:`https://nominatim.openstreetmap.org/search?city=${t}&format=json`;try{let e=await fetch(r);return await e.json()}catch(e){return console.error(e),{}}}async function t(e){const[t,r]=e,n=`https://api.open-meteo.com/v1/forecast?latitude=${t}&longitude=${r}&current_weather=true`;let a=await fetch(n);return a=await a.json(),null==a.current_weather?(console.error("Wasn't possible to retrieve the weather data!"),{temperature:"?"}):a.current_weather}function r(e){switch(e){case 0:return"Clear sky";case 1:return"Mainly clear";case 2:return"Partly cloudy";case 3:return"Overcast";case 45:return"Fog";case 48:return"Depositing rime fog";case 51:return"Light drizzle";case 53:return"Moderate drizzle";case 55:return"Dense intensity drizzle";case 56:return"Light freezing drizzle";case 57:return"Dense intensity freezing drizzle";case 61:return"Slight rain";case 63:return"Moderate rain";case 65:return"Heavy intensity rain";case 66:return"Light freezing rain";case 67:return"Heavy intensity freezing rain";case 71:return"Slight snow fall";case 73:return"Moderate snow fall";case 75:return"Heavy intensity snow fall";case 77:return"Snow grains";case 80:return"Slight rain showers";case 81:return"Moderate rain showers";case 82:return"Violent rain showers";case 85:return"Slight snow showers";case 86:return"Heavy snow showers";case 95:return"Slight or Moderate thunderstorm";case 96:return"Thunderstorm with slight hail";case 99:return"Thunderstorm with heavy hail";default:return"Unknown weather code"}}const n=document.querySelector("#query-mode").querySelector("#query-switch"),a=document.querySelectorAll(".query-mode-label"),o=document.querySelector("#controls"),i=document.querySelector("#city"),c=document.querySelector("#city-info"),s=document.querySelector("#temperature"),l=document.querySelector("#forecast");let u=!0,d="",y=["",""];function h(){u?(n.style.justifyContent="left",a[0].style.color="#999",a[1].style.color="revert",o.innerHTML=`\n      <label>City:\n        <input type="text" id="city-directive" value="${d}">\n      </label>\n    `):(n.style.justifyContent="right",a[0].style.color="revert",a[1].style.color="#999",o.innerHTML=`\n      <label>Latitude:\n        <input type="text" name="latitude" class="coordinate-directive" value="${y[0]}">\n      </label>\n      <label>Longitude:\n        <input type="text" name="longitude" class="coordinate-directive" value="${y[1]}">\n      </label>\n    `)}async function g(){let n,a;u?(n=await e("cityName",d),n=n[0]):n=await e("cityName",y),y[0]=n.lat,y[1]=n.lon;let o=[];n.display_name.split(", ").forEach(((e,t)=>{0===t?a=e:o.push(e)})),o=o.join("\n"),null==a?(i.innerText="Unknown",c.innerText="Unknown"):(i.innerText=a,c.innerText=o);const h=await t(y);s.innerText=`${h.temperature}ÂºC`,l.innerText=`${r(h.weathercode)}`;const g=0===(m=h.weathercode)?["gold","lightcyan"]:m>=1&&m<=3?["khaki","lightcyan"]:45==m||48==m?["lightgray","lightblue"]:51==m||53==m||m>=55&&m<=57||61==m||63==m||m>=65&&m<=67||71==m||73==m||m>=75&&m<=77||85==m||86==m?["lightgray","snow"]:95==m||96==m||99==m?["gray","lightgray"]:void 0;var m;document.querySelector("body").style.background=`linear-gradient(to bottom, ${g[0]}, ${g[1]})`}n.addEventListener("click",(function(){u=!u,h()})),document.querySelector("#coordinate-submit").addEventListener("click",(async function(){if(u)d=document.querySelector("#city-directive").value;else{const e=document.querySelectorAll(".coordinate-directive");y[0]=e[0].value,y[1]=e[1].value}await g()})),h(),navigator.geolocation.getCurrentPosition((async function(t){const r=t.coords;y[0]=r.latitude,y[1]=r.longitude;let n=await e("coordinates",y);d=n.display_name.split(", ")[0],h(),g()}));
//# sourceMappingURL=index.9353cad5.js.map
